//*****************************************************************************
//
//! @page STMPE811_testcase STMPE811 function test
//!
//! File: @ref STMPE811Test.c
//!
//! <h2>Description</h2>
//! This module implements the test sequence for the STMPE811 sub component.<br><br>
//! - \p Board: STM32F107 <br><br>
//! - \p Last-Time(about): 0.5s <br><br>
//! - \p Phenomenon: Success or failure information will be printed on the UART. <br><br>
//! .
//!
//! <h2>Preconditions</h2>
//! The module requires the following options:<br><br>
//! - \p Option-define:
//! <br>(1)None.<br><br>
//! - \p Option-hardware:
//! <br>(1)Connect an USB cable to the development board.<br><br>
//! - \p Option-OtherModule:
//! <br>Connect an COM cable to the development board.<br>
//! .
//! In case some of the required options are not enabled then some or all tests
//! may be skipped or result FAILED.<br>
//!
//! <h2>Test Cases</h2>
//! The module contain those sub tests:<br><br>
//! - \subpage test_M24Cxx_Function
//! .
//! \file M24CxxTest.c
//! \brief M24Cxx test source file
//! \brief M24Cxx test header file <br>
//
//*****************************************************************************

#include "test.h"
#include "STMPE811.h"
#include "hw_STMPE811.h"
#include "HX8347-G.h"
extern unsigned long ulX, ulY, ulZ;
extern xtBoolean TouchDetect;
signed long xSlope,ySlope;
unsigned char ucBulb[]={
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0x8a,0x83,0x28,0xa4,0xc9,0x93,0x2a,0x73,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xa0,0xd4,0x44,0xdd,0x09,0xee,0xad,0xf6,0x8d,0xee,
  0xc9,0xe5,0xe2,0xd4,0xc0,0xcc,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe1,0xdc,0x07,0xee,0xcb,0xfe,0xcc,0xfe,
  0xee,0xfe,0x0f,0xff,0x10,0xff,0x10,0xff,0xa7,0xe5,0xa0,0xd4,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xa4,0xed,0xaa,0xfe,
  0xcb,0xfe,0x6a,0xf6,0x08,0xee,0x2a,0xee,0x6c,0xf6,0x8e,0xf6,0x32,0xff,0x66,0xdd,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xe1,0xdc,0x27,0xf6,0x28,0xf6,0x49,0xf6,0xee,0xfe,0x0f,0xff,0x10,0xff,0x32,0xff,
  0x53,0xff,0x0b,0xee,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0x01,0xdd,0x27,0xf6,0xcb,0xfe,0xcc,0xfe,0xee,0xfe,0x0f,0xff,
  0x10,0xff,0x32,0xff,0xf1,0xf6,0x24,0xdd,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xfc,0xa4,0xe5,0xaa,0xfe,0xcb,0xfe,0xac,0xfe,
  0x6b,0xf6,0x4a,0xee,0x6c,0xf6,0x8d,0xf6,0x44,0xdd,0xa0,0xcc,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe1,0xd4,0x89,0xfe,
  0x48,0xf6,0x08,0xee,0xac,0xf6,0x0f,0xff,0x10,0xff,0x32,0xff,0x53,0xff,0x44,0xdd,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xc1,0xd4,0x06,0xee,0xaa,0xfe,0xcc,0xfe,0xee,0xfe,0x0f,0xff,0x10,0xff,0x32,0xff,
  0xaf,0xf6,0xe2,0xdc,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0x84,0xe5,0xaa,0xfe,0xcb,0xfe,0xcc,0xfe,0xee,0xfe,0x0f,0xff,
  0x10,0xff,0x32,0xff,0xa7,0xe5,0x80,0xcc,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xc5,0xed,0x52,0xa5,0x58,0x95,0x99,0x9d,
  0xda,0xa5,0xda,0xa5,0x99,0x9d,0x58,0x95,0x95,0xa5,0x86,0xdd,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xd5,0x84,0x7a,0xc6,
  0xba,0xce,0x9a,0xc6,0x59,0xbe,0x39,0xb6,0x39,0xb6,0x38,0xbe,0x7b,0xbe,0x94,0x7c,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x5a,0x5c,
  0x7c,0xbe,0xb7,0xad,0x79,0xc6,0x79,0xc6,0x79,0xbe,0x38,0xb6,0x18,0xae,0xd6,0xb5,
  0x97,0x9d,0x3b,0xb6,0xd7,0x4b,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0x7b,0x95,0x1a,0xae,0xd8,0xad,0x9a,0xc6,0x7a,0xc6,0x58,0xbe,0x37,0xb6,
  0xf7,0xad,0xd7,0xb5,0xb9,0x9d,0x7b,0xb6,0xd9,0x74,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0x17,0x64,0x3c,0xae,0xb9,0x9d,0xf7,0xb5,0xbb,0xce,0xdb,0xce,
  0x9b,0xc6,0x7a,0xbe,0x39,0xb6,0xf7,0xb5,0xd9,0xa5,0xf9,0xa5,0xdb,0xa5,0xd9,0x34,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x3b,0x5c,0x7c,0xb6,0xd9,0xa5,0x18,0xb6,
  0xba,0xce,0xdb,0xce,0xba,0xce,0x9a,0xc6,0x79,0xbe,0x17,0xbe,0x19,0xae,0xf8,0xa5,
  0x7c,0xbe,0xd8,0x4b,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x1b,0x85,0x7b,0xbe,
  0xf8,0xad,0x18,0xbe,0xda,0xd6,0xfb,0xd6,0xdb,0xd6,0xba,0xce,0x99,0xc6,0x37,0xc6,
  0x38,0xb6,0x18,0xb6,0x9b,0xc6,0xd9,0x74,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x7b,0x64,
  0x7d,0xb6,0x19,0xae,0x38,0xb6,0x37,0xc6,0xfa,0xd6,0x1b,0xdf,0xfb,0xde,0xda,0xd6,
  0xb9,0xce,0x37,0xc6,0x58,0xbe,0x58,0xbe,0x59,0xb6,0x3c,0xb6,0x17,0x54,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0x7b,0x64,0x1d,0xae,0x5a,0xbe,0x18,0xae,0x58,0xbe,0x58,0xc6,0x57,0xce,0xd9,0xde,
  0x1a,0xdf,0xb8,0xd6,0x77,0xce,0x57,0xce,0x98,0xc6,0x78,0xbe,0x58,0xbe,0x9a,0xc6,
  0xdb,0xa5,0xd7,0x53,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0x7c,0x5c,0xdc,0x9d,0x7b,0xbe,0x18,0xae,0x38,0xb6,0x58,0xbe,0x98,0xc6,
  0x77,0xce,0x70,0x94,0x77,0xd6,0xb0,0x94,0xb4,0xb5,0xb8,0xd6,0x98,0xce,0x98,0xc6,
  0x58,0xbe,0x38,0xb6,0xbb,0xc6,0x3a,0x8d,0x19,0x54,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xfd,0x64,0x3c,0x85,0xbb,0xc6,0xf9,0xa5,0x18,0xb6,0x58,0xbe,
  0x78,0xc6,0x98,0xce,0x73,0xad,0xd1,0x9c,0xf7,0xde,0xb3,0xb5,0x70,0x8c,0xd7,0xde,
  0xd8,0xd6,0x98,0xce,0x78,0xc6,0x58,0xbe,0x18,0xb6,0xbc,0xc6,0x99,0x6c,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xdc,0x74,0xbc,0xc6,0xd9,0x9d,0xf8,0xa5,
  0x38,0xb6,0x58,0xbe,0x98,0xc6,0xb8,0xd6,0xf2,0x9c,0x76,0xd6,0x17,0xe7,0x16,0xe7,
  0x90,0x94,0xd6,0xde,0xd7,0xde,0xb8,0xd6,0x98,0xc6,0x58,0xbe,0x38,0xb6,0x19,0xae,
  0x9c,0xbe,0x18,0x5c,0xff,0xff,0xff,0xff,0xff,0xff,0xbc,0x6c,0x3d,0xae,0xf9,0xa5,
  0xd8,0x9d,0xf8,0xad,0x38,0xb6,0x78,0xbe,0x98,0xce,0xb7,0xd6,0x54,0xad,0x17,0xe7,
  0x36,0xef,0x36,0xef,0xd4,0xbd,0x15,0xc6,0xf7,0xde,0xd8,0xd6,0x98,0xce,0x78,0xbe,
  0x38,0xb6,0xf8,0xad,0x3a,0xb6,0xdb,0x9d,0x18,0x4c,0xff,0xff,0xff,0xff,0xfd,0x74,
  0x7c,0xbe,0x99,0x95,0xd9,0x9d,0x18,0xae,0x38,0xb6,0x78,0xc6,0x98,0xce,0x77,0xce,
  0x56,0xce,0x16,0xef,0x56,0xf7,0x55,0xf7,0x36,0xef,0xf6,0xc5,0xf7,0xe6,0xd7,0xde,
  0x98,0xce,0x78,0xc6,0x38,0xb6,0x18,0xae,0xd9,0x9d,0x9c,0xc6,0x38,0x54,0xff,0xff,
  0xff,0x07,0xdd,0x9d,0xda,0x9d,0x99,0x95,0xd9,0x9d,0x19,0xae,0x58,0xbe,0x78,0xc6,
  0xb8,0xce,0x98,0xd6,0xd7,0xde,0x36,0xef,0x56,0xf7,0x55,0xff,0x56,0xf7,0x97,0xd6,
  0xf8,0xde,0xd7,0xd6,0xb8,0xce,0x78,0xc6,0x58,0xbe,0x19,0xae,0xd9,0x9d,0x5b,0xb6,
  0x1a,0x85,0x1f,0x00,0xde,0x6c,0x5d,0xb6,0x59,0x8d,0x99,0x95,0xd9,0x9d,0x18,0xae,
  0x38,0xb6,0x78,0xc6,0xb8,0xce,0x1a,0xdf,0xf7,0xe6,0x16,0xef,0x36,0xf7,0x55,0xf7,
  0x36,0xf7,0x17,0xe7,0x19,0xe7,0xd7,0xde,0x98,0xce,0x78,0xc6,0x38,0xb6,0x18,0xae,
  0xd9,0x9d,0xb9,0x9d,0xfb,0xa5,0xd8,0x53,0xde,0x6c,0x5c,0xb6,0x58,0x85,0x99,0x95,
  0xd8,0x9d,0x19,0xae,0x9a,0xc6,0xfa,0xd6,0x3b,0xdf,0xbe,0xf7,0x5b,0xef,0x37,0xef,
  0x37,0xef,0x37,0xf7,0x37,0xef,0x9b,0xf7,0x9c,0xf7,0xd8,0xd6,0xb8,0xce,0x78,0xbe,
  0x38,0xb6,0xf8,0xad,0xd8,0x9d,0x99,0x95,0x3b,0xb6,0xd8,0x4b,0xfe,0x74,0x5c,0xb6,
  0x58,0x85,0x99,0x95,0xf9,0xa5,0xbb,0xce,0xfb,0xd6,0x1b,0xdf,0x3b,0xdf,0x7c,0xef,
  0xde,0xff,0xfe,0xff,0xde,0xff,0xde,0xff,0xde,0xff,0x9c,0xf7,0xf8,0xde,0xb8,0xd6,
  0x98,0xc6,0x58,0xbe,0x38,0xb6,0xf8,0xa5,0xb8,0x9d,0x99,0x95,0x5c,0xb6,0x18,0x54,
  0xff,0x74,0x5d,0xb6,0x38,0x85,0x79,0x8d,0x7b,0xbe,0xbb,0xce,0xfb,0xd6,0xfb,0xd6,
  0x1b,0xdf,0x3b,0xe7,0x5b,0xe7,0x7b,0xef,0x7b,0xef,0x5a,0xef,0x18,0xe7,0xd7,0xde,
  0xb8,0xd6,0x98,0xce,0x78,0xc6,0x58,0xbe,0x18,0xae,0xd9,0xa5,0xb8,0x95,0x79,0x8d,
  0x1b,0xae,0xf9,0x53,0xdf,0x75,0xfd,0xa5,0x79,0x8d,0xb9,0x95,0x9b,0xbe,0xbb,0xc6,
  0xdb,0xce,0xfb,0xd6,0x1b,0xdf,0x3b,0xdf,0x3b,0xe7,0x5b,0xe7,0x5b,0xe7,0x5b,0xe7,
  0x5b,0xe7,0xb8,0xd6,0x98,0xce,0x98,0xc6,0x58,0xbe,0x38,0xb6,0xf8,0xad,0xd9,0x9d,
  0x99,0x95,0xda,0x9d,0x7b,0x95,0xb8,0x4b,0xff,0xff,0x9d,0x8d,0xda,0x9d,0xb9,0x95,
  0x9b,0xbe,0xbb,0xc6,0xdb,0xce,0xdb,0xce,0xfb,0xd6,0x1b,0xdf,0x3b,0xdf,0x5b,0xe7,
  0x3b,0xe7,0x3b,0xe7,0x3b,0xe7,0x1a,0xdf,0x78,0xc6,0x58,0xbe,0x38,0xb6,0x18,0xae,
  0xf8,0xa5,0xb8,0x9d,0x99,0x95,0x3b,0xae,0xda,0x74,0xff,0xff,0xff,0xff,0x1d,0x7d,
  0x3b,0xae,0x79,0x8d,0x7b,0xbe,0x9b,0xbe,0xbb,0xc6,0xdb,0xce,0xfb,0xd6,0xfb,0xd6,
  0x1b,0xdf,0x1b,0xdf,0x3b,0xdf,0x3b,0xdf,0x3b,0xdf,0x1b,0xdf,0x79,0xc6,0x38,0xb6,
  0x18,0xb6,0xf8,0xa5,0xd9,0x9d,0x98,0x95,0x79,0x8d,0x7b,0xb6,0x59,0x5c,0xff,0xff,
  0xff,0xff,0x1e,0x75,0x7d,0xb6,0x59,0x85,0x5b,0xb6,0x9b,0xbe,0x9b,0xc6,0xbb,0xc6,
  0xdb,0xce,0xfb,0xd6,0xfb,0xd6,0xfb,0xd6,0x1b,0xdf,0x1b,0xdf,0x1b,0xdf,0xfb,0xd6,
  0x9a,0xc6,0x18,0xae,0xf8,0xad,0xd9,0x9d,0xb9,0x95,0x78,0x8d,0x99,0x95,0x3c,0xae,
  0x39,0x5c,0xff,0xff,0xff,0xff,0xff,0xff,0x3e,0x85,0x7c,0xb6,0x9a,0x95,0x5b,0xb6,
  0x7b,0xbe,0x9b,0xc6,0xbb,0xc6,0xdb,0xce,0xdb,0xce,0xfb,0xd6,0xfb,0xd6,0xfb,0xd6,
  0xfb,0xd6,0xfb,0xd6,0x7a,0xbe,0xf9,0xa5,0xd9,0x9d,0xb8,0x95,0x79,0x95,0x59,0x8d,
  0x9c,0xbe,0x9a,0x64,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x1f,0x75,0xde,0x9d,
  0xfa,0x9d,0xda,0xa5,0x7b,0xb6,0x7b,0xbe,0x9b,0xc6,0xbb,0xc6,0xbb,0xc6,0xdb,0xce,
  0xdb,0xce,0xdb,0xce,0xdb,0xce,0xdb,0xce,0x3a,0xb6,0xb8,0x9d,0xb9,0x95,0x79,0x95,
  0x58,0x8d,0x3b,0xae,0x5b,0x85,0x5b,0x5c,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0x1e,0x75,0x5d,0xb6,0x9a,0x95,0xda,0x9d,0x7b,0xb6,0x9b,0xbe,0x9b,0xbe,
  0x9b,0xc6,0xbb,0xc6,0xbb,0xc6,0xbb,0xc6,0xbb,0xc6,0x9b,0xbe,0xb9,0x9d,0x99,0x95,
  0x78,0x8d,0x58,0x8d,0xda,0x9d,0x3c,0xae,0x7a,0x64,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x1d,0x75,0x1d,0xae,0x3b,0xae,0x99,0x8d,
  0x3b,0xae,0x7b,0xbe,0x9b,0xbe,0x9b,0xbe,0x9b,0xbe,0x9b,0xbe,0x5b,0xb6,0xb9,0x9d,
  0x78,0x8d,0x79,0x8d,0x79,0x8d,0x7b,0xb6,0xdc,0x9d,0x9b,0x64,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x1f,0x75,
  0x7e,0x8d,0x7c,0xbe,0xba,0x95,0x59,0x8d,0xd9,0x9d,0xda,0x9d,0xfa,0xa5,0xb9,0x95,
  0x58,0x8d,0x59,0x8d,0x58,0x85,0xda,0x9d,0x7c,0xbe,0x1c,0x7d,0x9c,0x64,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0x1f,0x84,0x1e,0x7d,0xfe,0xa5,0x7d,0xb6,0x7c,0xb6,0x5b,0xb6,
  0xfa,0xa5,0xfa,0xa5,0x7b,0xb6,0x7c,0xb6,0x5d,0xb6,0xbc,0x9d,0xbc,0x6c,0x17,0x64,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xdf,0x84,0xff,0x74,
  0xfe,0x74,0x1d,0x7d,0x9d,0x95,0x9d,0x95,0xfd,0x74,0xdc,0x6c,0x9d,0x6c,0xdf,0x64,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0x80,0xdc,0xc8,0x93,0x87,0xb4,0x28,0xa4,0x87,0x8b,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xc0,0xd4,0xa5,0xe5,0x6b,0xee,0xee,0xfe,0xce,0xf6,
  0x2c,0xee,0x24,0xdd,0xa0,0xd4,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x22,0xdd,0x48,0xf6,0xcb,0xfe,0xcc,0xfe,
  0xee,0xfe,0x0f,0xff,0x10,0xff,0xaf,0xf6,0xe9,0xe5,0xa0,0xd4,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0,0xff,0xa4,0xed,0xaa,0xfe,
  0xcb,0xfe,0x29,0xee,0x08,0xee,0x2a,0xee,0x6c,0xf6,0xf0,0xfe,0x53,0xff,0xa8,0xe5,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xc0,0xd4,0xe6,0xed,0x28,0xf6,0x8b,0xf6,0xee,0xfe,0x0f,0xff,0x10,0xff,0x32,0xff,
  0x53,0xff,0xea,0xe5,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0x22,0xdd,0x89,0xfe,0xcb,0xfe,0xcc,0xfe,0xee,0xfe,0x0f,0xff,
  0x10,0xff,0x32,0xff,0x6d,0xee,0x03,0xdd,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xc0,0xcc,0xa4,0xe5,0xaa,0xfe,0xcb,0xfe,0x6a,0xf6,
  0x29,0xee,0x4a,0xee,0x6c,0xf6,0x6d,0xf6,0xa7,0xe5,0xa0,0xd4,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe1,0xdc,0x69,0xfe,
  0x28,0xee,0x49,0xf6,0xed,0xfe,0x0f,0xff,0x10,0xff,0x32,0xff,0x53,0xff,0x45,0xdd,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xe1,0xdc,0x27,0xf6,0xcb,0xfe,0xcc,0xfe,0xee,0xfe,0x0f,0xff,0x10,0xff,0x32,0xff,
  0x4c,0xee,0xc0,0xd4,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0x00,0xfc,0xa4,0xed,0xc8,0xfe,0x06,0xf7,0x05,0xef,0x24,0xef,0x25,0xef,
  0x28,0xef,0x2b,0xf7,0xe8,0xe5,0xa0,0xd4,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x43,0xee,0x6b,0xf7,0x92,0xf7,0xd2,0xff,
  0xd2,0xff,0xd2,0xff,0xd2,0xff,0x92,0xf7,0x2b,0xef,0x25,0xe6,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x60,0xef,0x8d,0xf7,0x8d,0xff,
  0x2e,0xef,0xd0,0xff,0xce,0xff,0xcd,0xff,0xcb,0xff,0x6b,0xf7,0x71,0xf7,0x49,0xef,
  0xa0,0xd6,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x86,0xef,
  0xef,0xff,0x86,0xf7,0x0e,0xef,0xd0,0xff,0xcf,0xff,0xcd,0xff,0xab,0xff,0x4a,0xf7,
  0x29,0xef,0xd2,0xff,0x21,0xe7,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xe0,0xff,0xaf,0xf7,0xe7,0xff,0xc7,0xff,0x2f,0xef,0xf1,0xff,0xae,0xff,0xac,0xff,
  0xcb,0xff,0x8b,0xf7,0x6a,0xf7,0xed,0xff,0x69,0xef,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0x60,0xef,0xd1,0xff,0xe6,0xff,0xc8,0xff,0x50,0xef,0xf2,0xff,
  0xf0,0xff,0xee,0xff,0xec,0xff,0x8c,0xf7,0x6b,0xf7,0xe8,0xff,0xb0,0xf7,0xe0,0xde,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x84,0xf7,0xd0,0xff,0xe7,0xff,0xc9,0xff,
  0x50,0xef,0xf2,0xff,0xf1,0xff,0xef,0xff,0xed,0xff,0x8c,0xf7,0x6b,0xf7,0xe8,0xff,
  0xd2,0xff,0x21,0xe7,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xa0,0xd6,0xad,0xf7,0xeb,0xff,
  0xe8,0xff,0xc9,0xff,0x50,0xef,0xf3,0xff,0xf1,0xff,0xf0,0xff,0xee,0xff,0x8d,0xf7,
  0x6c,0xf7,0xe9,0xff,0xef,0xff,0x69,0xef,0xe0,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x20,0xe7,0xa6,0xf7,
  0xf2,0xff,0xe8,0xff,0xe9,0xff,0xcb,0xff,0x31,0xef,0xf3,0xff,0xf2,0xff,0xf0,0xff,
  0xef,0xff,0x4f,0xef,0x8d,0xf7,0xea,0xff,0xe9,0xff,0xd3,0xff,0x44,0xef,0xe0,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0,0xff,
  0xa5,0xf7,0xf2,0xff,0xe8,0xff,0xe9,0xff,0xea,0xff,0xeb,0xff,0x8e,0xf7,0x11,0xe7,
  0x51,0xef,0x51,0xef,0xb0,0xde,0x6e,0xef,0xec,0xff,0xeb,0xff,0xea,0xff,0xea,0xff,
  0xd3,0xff,0x42,0xe7,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xe0,0xff,0xa1,0xf7,0xf3,0xff,0xe8,0xff,0xe8,0xff,0xe9,0xff,0xea,0xff,0xeb,0xff,
  0xec,0xff,0xac,0xb5,0x0d,0xc6,0xae,0xff,0xaa,0x73,0xad,0xf7,0xec,0xff,0xeb,0xff,
  0xea,0xff,0xe9,0xff,0xeb,0xff,0xb1,0xf7,0x41,0xef,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xa0,0xf7,0xef,0xff,0xeb,0xff,0xe7,0xff,0xe9,0xff,0xea,0xff,
  0xeb,0xff,0xec,0xff,0xed,0xff,0xcd,0x9c,0xaf,0xf7,0xef,0xff,0xcd,0xbd,0x6d,0xce,
  0xed,0xff,0xec,0xff,0xeb,0xff,0xea,0xff,0xe9,0xff,0xef,0xff,0x8a,0xef,0x60,0xef,
  0xff,0xff,0xff,0xff,0xff,0xff,0x80,0xef,0xc8,0xf7,0xef,0xff,0xe7,0xff,0xe8,0xff,
  0xe9,0xff,0xea,0xff,0xeb,0xff,0xed,0xff,0x8e,0xf7,0x8f,0xb5,0xf0,0xff,0xf0,0xff,
  0xb0,0xf7,0x6f,0xad,0xee,0xff,0xed,0xff,0xeb,0xff,0xea,0xff,0xe9,0xff,0xe8,0xff,
  0xf2,0xff,0x64,0xef,0xe0,0xff,0xff,0xff,0xff,0xff,0xa1,0xf7,0xf2,0xff,0xe6,0xff,
  0xe7,0xff,0xe8,0xff,0xe9,0xff,0xeb,0xff,0xec,0xff,0xed,0xff,0xd0,0xde,0x10,0xdf,
  0xf1,0xff,0xf2,0xff,0xf1,0xff,0x31,0xc6,0x8f,0xf7,0xed,0xff,0xec,0xff,0xea,0xff,
  0xe9,0xff,0xe8,0xff,0xe8,0xff,0xd1,0xf7,0x40,0xe7,0xff,0xff,0xff,0xff,0xc8,0xf7,
  0xed,0xff,0xe6,0xff,0xe7,0xff,0xe8,0xff,0xe9,0xff,0xeb,0xff,0xec,0xff,0xed,0xff,
  0xb3,0xd6,0xf1,0xff,0xf2,0xff,0xf3,0xff,0xf2,0xff,0x51,0xef,0x12,0xdf,0xed,0xff,
  0xec,0xff,0xea,0xff,0xe9,0xff,0xe8,0xff,0xe7,0xff,0xf2,0xff,0x42,0xef,0xff,0xff,
  0x80,0xf7,0xef,0xff,0xe6,0xff,0xe6,0xff,0xe7,0xff,0xe8,0xff,0xe9,0xff,0xeb,0xff,
  0xec,0xff,0xcf,0xff,0x34,0xe7,0xf0,0xff,0xf2,0xff,0xf2,0xff,0xf1,0xff,0xf0,0xff,
  0x14,0xe7,0xed,0xff,0xec,0xff,0xea,0xff,0xe9,0xff,0xe8,0xff,0xe7,0xff,0xec,0xff,
  0x8a,0xef,0x00,0xe7,0xc0,0xff,0xf0,0xff,0xe4,0xff,0xe6,0xff,0xe7,0xff,0xe8,0xff,
  0xe9,0xff,0xea,0xff,0xec,0xff,0xd2,0xff,0xd1,0xf7,0xf0,0xff,0xf1,0xff,0xf1,0xff,
  0xf0,0xff,0xf0,0xff,0xb3,0xf7,0xd1,0xff,0xec,0xff,0xea,0xff,0xe9,0xff,0xe8,0xff,
  0xe7,0xff,0xe7,0xff,0xae,0xf7,0x20,0xe7,0xc0,0xff,0xf1,0xff,0xe4,0xff,0xe5,0xff,
  0xe6,0xff,0xe8,0xff,0xec,0xff,0xf0,0xff,0xf1,0xff,0xf8,0xff,0xfa,0xff,0xf2,0xff,
  0xf0,0xff,0xf3,0xff,0xf0,0xff,0xf2,0xff,0xfa,0xff,0xef,0xff,0xeb,0xff,0xea,0xff,
  0xe9,0xff,0xe8,0xff,0xe7,0xff,0xe5,0xff,0xd0,0xf7,0x40,0xef,0xc0,0xff,0xf0,0xff,
  0xe4,0xff,0xe5,0xff,0xe6,0xff,0xef,0xff,0xf2,0xff,0xf2,0xff,0xf3,0xff,0xf3,0xff,
  0xf7,0xff,0xfc,0xff,0xfc,0xff,0xf9,0xff,0xfc,0xff,0xf9,0xff,0xef,0xff,0xec,0xff,
  0xeb,0xff,0xe9,0xff,0xe8,0xff,0xe7,0xff,0xe6,0xff,0xe6,0xff,0xd0,0xf7,0x20,0xe7,
  0xc0,0xff,0xf0,0xff,0xe4,0xff,0xe5,0xff,0xed,0xff,0xf1,0xff,0xf2,0xff,0xf2,0xff,
  0xf3,0xff,0xf3,0xff,0xf4,0xff,0xf4,0xff,0xf4,0xff,0xf4,0xff,0xf0,0xff,0xed,0xff,
  0xec,0xff,0xeb,0xff,0xea,0xff,0xe9,0xff,0xe8,0xff,0xe7,0xff,0xe6,0xff,0xea,0xff,
  0xab,0xf7,0x60,0xef,0xe0,0xff,0xeb,0xff,0xe9,0xff,0xe4,0xff,0xf0,0xff,0xf1,0xff,
  0xf1,0xff,0xf2,0xff,0xf2,0xff,0xf3,0xff,0xf3,0xff,0xf3,0xff,0xf4,0xff,0xf4,0xff,
  0xf4,0xff,0xee,0xff,0xeb,0xff,0xea,0xff,0xe9,0xff,0xe8,0xff,0xe7,0xff,0xe7,0xff,
  0xe5,0xff,0xee,0xff,0x86,0xf7,0xff,0xff,0xff,0xff,0xe6,0xff,0xed,0xff,0xe5,0xff,
  0xf0,0xff,0xf1,0xff,0xf1,0xff,0xf2,0xff,0xf2,0xff,0xf2,0xff,0xf3,0xff,0xf3,0xff,
  0xf3,0xff,0xf3,0xff,0xf3,0xff,0xf2,0xff,0xeb,0xff,0xe9,0xff,0xe9,0xff,0xe8,0xff,
  0xe7,0xff,0xe6,0xff,0xe5,0xff,0xf2,0xff,0x61,0xef,0xff,0xff,0xff,0xff,0xe1,0xff,
  0xf2,0xff,0xe4,0xff,0xf0,0xff,0xf0,0xff,0xf1,0xff,0xf1,0xff,0xf2,0xff,0xf2,0xff,
  0xf2,0xff,0xf2,0xff,0xf2,0xff,0xf3,0xff,0xf2,0xff,0xf2,0xff,0xed,0xff,0xe9,0xff,
  0xe8,0xff,0xe7,0xff,0xe6,0xff,0xe5,0xff,0xe5,0xff,0xf2,0xff,0x60,0xef,0xff,0xff,
  0xff,0xff,0xe0,0xff,0xeb,0xff,0xeb,0xff,0xec,0xff,0xf0,0xff,0xf1,0xff,0xf1,0xff,
  0xf1,0xff,0xf2,0xff,0xf2,0xff,0xf2,0xff,0xf2,0xff,0xf2,0xff,0xf2,0xff,0xf2,0xff,
  0xf0,0xff,0xe8,0xff,0xe7,0xff,0xe6,0xff,0xe6,0xff,0xe5,0xff,0xf0,0xff,0x86,0xf7,
  0x60,0xef,0xff,0xff,0xff,0xff,0xff,0xff,0xe0,0xff,0xf1,0xff,0xe8,0xff,0xf0,0xff,
  0xf0,0xff,0xf1,0xff,0xf1,0xff,0xf1,0xff,0xf1,0xff,0xf2,0xff,0xf2,0xff,0xf2,0xff,
  0xf2,0xff,0xf1,0xff,0xef,0xff,0xe7,0xff,0xe6,0xff,0xe6,0xff,0xe5,0xff,0xe9,0xff,
  0xcd,0xf7,0x60,0xef,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe3,0xff,
  0xf1,0xff,0xe8,0xff,0xf0,0xff,0xf0,0xff,0xf1,0xff,0xf1,0xff,0xf1,0xff,0xf1,0xff,
  0xf1,0xff,0xf1,0xff,0xf1,0xff,0xf1,0xff,0xee,0xff,0xe6,0xff,0xe5,0xff,0xe5,0xff,
  0xe5,0xff,0xf2,0xff,0x81,0xf7,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xe0,0xff,0xe8,0xff,0xf2,0xff,0xea,0xff,0xef,0xff,0xf0,0xff,0xf0,0xff,
  0xf1,0xff,0xf1,0xff,0xf1,0xff,0xf1,0xff,0xf1,0xff,0xf0,0xff,0xe8,0xff,0xe5,0xff,
  0xe5,0xff,0xe9,0xff,0xf2,0xff,0xa4,0xf7,0xe0,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0,0xff,0xe4,0xff,0xf1,0xff,0xed,0xff,
  0xec,0xff,0xf0,0xff,0xf0,0xff,0xf0,0xff,0xf0,0xff,0xf0,0xff,0xf0,0xff,0xe9,0xff,
  0xe4,0xff,0xe4,0xff,0xef,0xff,0xce,0xff,0xa2,0xf7,0xe0,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xe0,0xff,0xea,0xff,0xf1,0xff,0xef,0xff,0xee,0xff,0xeb,0xff,0xea,0xff,0xe9,0xff,
  0xe7,0xff,0xeb,0xff,0xf0,0xff,0xf2,0xff,0xc7,0xf7,0xa0,0xf7,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xe0,0xff,0xe1,0xff,0xe5,0xff,0xea,0xff,0xef,0xff,
  0xf0,0xff,0xf0,0xff,0xce,0xff,0xe9,0xff,0xc4,0xff,0xa0,0xf7,0xe0,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xe0,0xff,0xc0,0xff,0xc0,0xff,0xe0,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
};
unsigned char ucPoint[]={
  0x00,0xF8,0x00,0xF8,0x00,0xF8,0x00,0xF8,0x00,0xF8,0x00,0xF8,0x00,0xF8,0x00,0xF8,
  0x00,0xF8,0x00,0xF8,0x00,0xF8,0x00,0xF8,0x00,0xF8,0x00,0xF8,0x00,0xF8,0x00,0xF8,
};
unsigned char ucClearPoint[]={
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
};
//
// Point used during the touchscreen calibration process.
//
typedef struct _CalibrationPoint{
    //
    // Coordinate of point along the X-axis of the screen.
    //
    unsigned long ulX;
    //
    // Coordinate of point along the Y-axis of the screen.
    //
    unsigned long ulY;
    //
    // Calibration data of point.
    //
    unsigned long ulData[2];
} CalibrationPoint;

//
// Calibration points.
//
CalibrationPoint Points[] = {
    // Top-left corner calibration point
    {
        HX8347_DISPLAY_WIDTH / 10,
        HX8347_DISPLAY_HEIGHT / 10,
        {0, 0}
    },
    // Top-right corner calibration point
    {
        HX8347_DISPLAY_WIDTH - HX8347_DISPLAY_WIDTH / 10,
        HX8347_DISPLAY_HEIGHT / 10,
        {0, 0}
    },
    // Bottom-right corner calibration point
    {
        HX8347_DISPLAY_WIDTH - HX8347_DISPLAY_WIDTH / 10,
        HX8347_DISPLAY_HEIGHT - HX8347_DISPLAY_HEIGHT / 10,
        {0, 0}
    },
    // Bottom-left corner calibration point
    {
        HX8347_DISPLAY_WIDTH / 10,
        HX8347_DISPLAY_HEIGHT - HX8347_DISPLAY_HEIGHT / 10,
        {0, 0}
    }
};

//
// Test Point.
//
CalibrationPoint testPoint ={
    HX8347_DISPLAY_WIDTH / 2,
    HX8347_DISPLAY_HEIGHT / 2,
    {0, 0}
};

//*****************************************************************************
//
//! \brief display a calibration point.
//!
//! \param ulX horizontal position.
//! \param ulY vertical position.
//! \param ulW bmp width in pixel.
//! \param ulH bmp height in pixels.
//! \param pucBmp address at which the bmp data resides.
//!
//! This function is to draws a rectangle. 
//!
//! \return None.
//
//*****************************************************************************
void DrawCalibrationPoint(unsigned long ulX, unsigned long ulY, 
                                             unsigned long ulW,
                                             unsigned long ulH,
                                             unsigned char *pucBmp)
{
  HX8347DisplayBmp(ulX-ulW/2, ulY-ulH/2, ulW, ulH, pucBmp);
}

//*****************************************************************************
//
//! \brief Clear a calibration point.
//!
//! \param ulX horizontal position.
//! \param ulY vertical position.
//! \param ulW bmp width in pixel.
//! \param ulH bmp height in pixels.
//! \param pucBmp address at which the bmp data resides.
//!
//! This function is to Clear a rectangle. 
//!
//! \return None.
//
//*****************************************************************************
void ClearCalibrationPoint(unsigned long ulX, unsigned long ulY,
                                              unsigned long ulW,
                                              unsigned long ulH,
                                              unsigned char *pucBmp)
{
  HX8347DisplayBmp(ulX-ulW/2, ulY-ulH/2, ulW, ulH, pucBmp);
}

//*****************************************************************************
//
//! \brief Performs the calibration process.
//!
//! \param none.
//!
//! Do calibration.
//!
//! \return the result of calibration.
//
//*****************************************************************************
unsigned char Calibrate(void)
{
    unsigned long i;
    signed long slope1, slope2;
    signed long xDiff, yDiff;
    unsigned char xOk, yOk;
    CalibrationPoint MeasuredPoint = {0};
    
    HX8347LCDClear(White);
    HX8347SetBackColor(White);
    HX8347SetTextColor(Blue);
    HX8347DisplayString(0,0,"LCD calibration,touch the dots!");
    TouchDetect = xfalse;
    
    //
    // Calibration points.
    //
    for(i=0; i<4; i++)
    {
      DrawCalibrationPoint(Points[i].ulX, Points[i].ulY, 4, 4, ucPoint);
      //
      // Wait for touch.
      //
      while(TouchDetect == xfalse);
      Points[i].ulData[0] = ulY;
      Points[i].ulData[1] = ulX;
      TouchDetect = xfalse;
      ClearCalibrationPoint(Points[i].ulX, Points[i].ulY, 4, 4, ucClearPoint);
    }
    //
    // Calculate slopes using the calibration data.
    //
    slope1 = (((signed long) Points[0].ulData[0]) - ((signed int) Points[1].ulData[0]))*1024;
    slope1 /= ((signed long) Points[0].ulX) - ((signed long) Points[1].ulX);
    slope2 = (((signed long) Points[2].ulData[0]) - ((signed long) Points[3].ulData[0]))*1024;
    slope2 /= ((signed long) Points[2].ulX) - ((signed long) Points[3].ulX);
    xSlope = (slope1 + slope2) / 2;

    slope1 = (((signed long) Points[0].ulData[1]) - ((signed long) Points[2].ulData[1]))*1024;
    slope1 /= ((signed long) Points[0].ulY) - ((signed long) Points[2].ulY);
    slope2 = (((signed long) Points[1].ulData[1]) - ((signed long) Points[3].ulData[1]))*1024;
    slope2 /= ((signed long) Points[1].ulY) - ((signed long) Points[3].ulY);
    ySlope = (slope1 + slope2) / 2;
    
    //
    // Test point.
    //
    DrawCalibrationPoint(testPoint.ulX, testPoint.ulY, 4, 4, ucPoint);
    while(TouchDetect == xfalse);
    MeasuredPoint.ulData[0] = ulY;
    MeasuredPoint.ulData[1] = ulX;
    MeasuredPoint.ulX = Points[0].ulX- (((signed long) Points[0].ulData[0] - (signed long) MeasuredPoint.ulData[0]) * 1024)/ xSlope;
    MeasuredPoint.ulY = Points[0].ulY-(((signed long) Points[0].ulData[1] - (signed long) MeasuredPoint.ulData[1]) * 1024)/ ySlope;
    TouchDetect = xfalse;
    ClearCalibrationPoint(testPoint.ulX, testPoint.ulY, 4, 4, ucClearPoint);
    
    //
    // Check resulting x and y.
    //
    xDiff = (signed long) MeasuredPoint.ulX - (signed long) testPoint.ulX;
    yDiff = (signed long) MeasuredPoint.ulY - (signed long) testPoint.ulY;
    xOk = (xDiff >= -20) && (xDiff <= 20);
    yOk = (yDiff >= -20) && (yDiff <= 20);     
    return (xOk && yOk);
}

//*****************************************************************************
//
//! \brief Get the Test description of STMPE811 Function test.
//!
//! \return the desccription of the STMPE811 test.
//
//*****************************************************************************
static char* STMPE811GetTest(void)
{

    return "STMPE811 Function test";
}

//*****************************************************************************
//
//! \brief something should do before the test execute of M24Cxx test.
//!
//! \return None.
//
//*****************************************************************************
static void STMPE811Setup(void)
{
    HX8347Init(18000000);
    HX8347LCDClear(White);
    STMPE811Init();
}

//*****************************************************************************
//
//! \brief something should do after the test execute of STMPE811 test.
//!
//! \return None.
//
//*****************************************************************************
static void STMPE811TearDown(void)
{
   STMPE811SetOperatingMode(0);
}

//*****************************************************************************
//
//! \brief STMPE811 test execute main body.
//!
//! \return None.
//
//*****************************************************************************
static void STMPE811Execute(void)
{
    unsigned long ulDeviceID;
    unsigned char pucBuffer[2];
    unsigned long ulLightOn = 0;
    unsigned long ulResult;
    unsigned long ulPointX, ulPointY;
    
    //
    // Do calibration.
    //
    while(1)
    {
        ulResult = Calibrate();
        
        HX8347LCDClear(White);
        HX8347SetBackColor(White);
        HX8347SetTextColor(Red);
        
        //
        // Calibration success.
        //
        if(ulResult)
        {
            HX8347DisplayString(0,0,"Calibration Success !"); 
            SysCtlDelay(30000000);
            break;
        }
        //
        // Calibration failed.
        //
        else 
        {
            HX8347DisplayString(0,0,"Calibration Failed! Retry!"); 
            SysCtlDelay(30000000);
        }
    }
    
    //
    // Get STMPE811 device ID.
    //
    STMPE811Read(STMPE811_CHIP_ID,2,pucBuffer);
    ulDeviceID = (unsigned long)((pucBuffer[0] << 8)| pucBuffer[1]);
    
    //
    // Display STMPE811 device ID.
    //
    HX8347LCDClear(White);
    HX8347DisplayString(0, 0, "STMPE811 ID is:");
    HX8347DisplayN(0, 15, ulDeviceID);    
    HX8347DisplayBmp(100, 100, 26, 40, &ucBulb[ulLightOn*2080]);
    //
    // loop forever.
    //
    while(1)
    {
        //
        // If touch detected.
        //
        if(TouchDetect == xtrue)
        {    
            //
            // Get touch position in pixels.
            //
            ulPointX = Points[0].ulX- (((signed long) Points[0].ulData[0] - 
                                        (signed long) ulY) * 1024)/ xSlope;
            ulPointY = Points[0].ulY-(((signed long) Points[0].ulData[1] - 
                                       (signed long) ulX) * 1024)/ ySlope;
            //
            // Display touch position.
            //
            HX8347ClearLine(1);
            HX8347DisplayString(1, 0, "X:");
            HX8347DisplayN(1, 2, ulPointX);
            HX8347ClearLine(2);
            HX8347DisplayString(2, 0, "Y:");      
            HX8347DisplayN(2, 2, ulPointY);
           
            if((ulPointX > 100)&&(ulPointX < 126)
               &&(ulPointY > 100)&&(ulPointY < 140))
            {
                ulLightOn ^= 1;
                HX8347DisplayBmp(100, 100, 26, 40, &ucBulb[ulLightOn*2080]);
            }
            //
            // Clean the touch flag;
            //
            TouchDetect = xfalse;
         }     
    }  
    
}

//
// STMPE811 Function test case struct.
//
const tTestCase sTestSTMPE811Function = {
    STMPE811GetTest,	
    STMPE811Setup,
    STMPE811TearDown,
    STMPE811Execute
};

//
// STMPE811 test suits.
//
const tTestCase * const psPatternSTMPE811Test[] =
{
    &sTestSTMPE811Function,
    0
};

